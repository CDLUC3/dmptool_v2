<li <%= 'class=current-parent' if menu_level(0) == 'dmp_templates' || menu_level(0) == 'customization' %>>
  <%= link_to(content_tag(:span, 'DMP Templates'), requirements_templates_path) %>

  <ul class="children dmp-templates">
    <!-- The following adds "current" class when on DMP Template Overview page -->
    <% if menu_level(0) == 'dmp_templates' && menu_level(1) == 'overview' %>

      <li class="current"><%= link_to(content_tag(:span, 'Template Overview'), '#') %></li>
      <% if @requirements_template && @requirements_template.id %>
        <li><%= link_to(content_tag(:span, 'Template Details'), requirements_template_requirements_path(@requirements_template)) %></li>
      <% end %>
      <li class="last"></li>
    <% end %>

    <!-- The following adds "current" class when on DMP Template Details page -->
    <% if menu_level(0) == 'dmp_templates' && menu_level(1) == 'details' %>
      <li><%= link_to(content_tag(:span, 'Template Overview'), edit_requirements_template_path(@requirements_template)) %></li>
      <li class="current"><%= link_to(content_tag(:span, 'Template Details'), '#') %></li>
      <li class="last"></li>
    <% end %>
  </ul>
</li>